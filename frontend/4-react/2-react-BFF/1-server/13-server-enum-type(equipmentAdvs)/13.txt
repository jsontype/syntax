[Enum íƒ€ì… : ì—´ê±° íƒ€ì…]

1. ì‚¬ì „ì¤€ë¹„ : í”„ë¡œì íŠ¸ë¥¼ ìƒˆë¡œ ê¹”ì§€ ì•Šê³ , ì´ì „ ì±•í„°ì—ì„œì˜ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì¹´í”¼í•´ì„œ ê°€ì§€ê³  ì˜¨ë‹¤.

1. Enum íƒ€ì… : í•„ë“œë“¤ì´ ì§€ì •í•œ ê°’ë§Œ ê°€ì§ˆ ìˆ˜ ìˆê²Œ í•˜ëŠ” íƒ€ì…



1. typedefs-resolvers/_enums.js ìƒì„± : Roleì—ëŠ” developer, designer, planner ê°’ë§Œ ê°€ì§ˆ ìˆ˜ ìˆê²Œ í•˜ê³ , NewOrUsedì—ëŠ” new, used ê°’ë§Œ ê°€ì§ˆ ìˆ˜ ìˆê²Œ í•œë‹¤.
  const { gql } = require('apollo-server')

  const typeDefs = gql`
      enum Role {
          developer
          designer
          planner
      }
      enum NewOrUsed {
          new
          used
      }
  `
  module.exports = typeDefs



1. index.js ìˆ˜ì • : enumsë¥¼ ì„í¬íŠ¸í•´ì„œ ì—°ê²°í•´ë‘”ë‹¤.
  const { ApolloServer } = require("apollo-server")

  const queries = require("./typedefs-resolvers/_queries")
  const mutations = require("./typedefs-resolvers/_mutations")
  const enums = require("./typedefs-resolvers/_enums")
  const equipments = require("./typedefs-resolvers/equipments")
  const supplies = require("./typedefs-resolvers/supplies")

  const typeDefs = [
    queries,
    mutations,
    enums,
    equipments.typeDefs,
    supplies.typeDefs,
  ]

  const resolvers = [equipments.resolvers, supplies.resolvers]

  const server = new ApolloServer({ typeDefs, resolvers })

  server.listen().then(({ url }) => {
    console.log(`ğŸš€  Server ready at ${url}`)
  })



1. typedefs-resolvers/equipments.js ìˆ˜ì • : type Equipmentì— ì •ì˜í•´ë‘” Roleê³¼ NewOrUsedë¼ëŠ” enumsë¥¼ ì—°ê²°í•´ì¤€ë‹¤.
  const { gql } = require("apollo-server")
  const dbWorks = require("../dbWorks")

  const typeDefs = gql`
    type Equipment {
      id: String
      used_by: Role!
      count: Int
      new_or_used: NewOrUsed!
    }
    type EquipmentAdv {
      id: ID!
      used_by: String!
      count: Int!
      use_rate: Float
      is_new: Boolean!
    }
  `

  const resolvers = {
    Query: {
      equipments: (parent, args) => dbWorks.getEquipments(args),
      equipmentAdvs: (parent, args) =>
        dbWorks.getEquipments(args).map((equipment) => {
          if (equipment.used_by === "developer") {
            // ê°œë°œìê°€ ì‚¬ìš©í•˜ëŠ” ì¥ë¹„ì¼ ê²½ìš°, ì‚¬ìš©ëŸ‰ì„ ëœë¤ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ë„£ì–´ì¤„ ê²ƒì´ë‹¤.
            equipment.use_rate = Math.random().toFixed(2)
          }
          // ìƒˆê²ƒì¸ì§€ ì¤‘ê³ ì¸ì§€ë¥¼ Boolean ê°’ìœ¼ë¡œ êµ¬ë¶„í•˜ëŠ” í•„ë“œë¥¼ ì¶”ê°€í•œë‹¤.
          equipment.is_new = equipment.new_or_used === "new"
          return equipment
        }),
    },
    Mutation: {
      deleteEquipment: (parent, args) => dbWorks.deleteItem("equipments", args),
    },
  }

  module.exports = {
    typeDefs: typeDefs,
    resolvers: resolvers,
  }



1. í…ŒìŠ¤íŠ¸ : ì´ì „ê³¼ ì°¨ì´ê°€ ì—†ëŠ”ì§€ í…ŒìŠ¤íŠ¸
  $ cd app1
  $ npm start
  http://localhost:4000/ ì ‘ì† : GraphQL Playgroundê°€ ì—´ë¦°ë‹¤.
  GraphQL Playground ì‚¬ìš© : ì¢Œì¸¡ì— ë‹¤ìŒ ì¿¼ë¦¬ë¥¼ ë„£ê³  Runì„ í´ë¦­
    query {
      equipments {
        id
        used_by
        count
        new_or_used
      }
      equipmentAdvs {
        id
        used_by
        count
        use_rate
        is_new
      }
    }
  ì„±ê³µì ìœ¼ë¡œ equipments, equipmentAdvs ëª©ë¡ì´ ê°ê° í‘œì‹œë˜ëŠ”ì§€ í™•ì¸


  
1. í…ŒìŠ¤íŠ¸ : enums ì—ëŸ¬ì— ì˜í•´ ì‹¤íŒ¨í•˜ëŠ” ê²ƒì„ í…ŒìŠ¤íŠ¸
  data/equipments.csvì˜ Role í•­ëª© í•œê°œë¥¼ dev ë¡œ ë³€ê²½í•´ë³¸ë‹¤.
  ì„œë²„ë¥¼ í•œë²ˆ ê»ë‹¤ ì¼ ë‹¤.
  http://localhost:4000/ ì ‘ì† : GraphQL Playgroundê°€ ì—´ë¦°ë‹¤.
  GraphQL Playground ì‚¬ìš© : ì¢Œì¸¡ì— ë‹¤ìŒ ì¿¼ë¦¬ë¥¼ ë„£ê³  Runì„ í´ë¦­
    query {
      equipments {
        id
        used_by
        count
        new_or_used
      }
      equipmentAdvs {
        id
        used_by
        count
        use_rate
        is_new
      }
    }
  equipments, equipmentAdvs ëª©ë¡ í‘œì‹œì— ì‹¤íŒ¨í•˜ê³ , enumsì— ê±¸ë ¤ì„œ errorê°€ ë‚˜ëŠ” ê²ƒì„ í™•ì¸
  ë³€ê²½í–ˆë˜ data/equipments.csvì˜ Role í•­ëª©ì„ ëŒë ¤ë†“ëŠ”ë‹¤.
