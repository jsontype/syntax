[Scalar íƒ€ì…]

1. ì‚¬ì „ì¤€ë¹„ : í”„ë¡œì íŠ¸ë¥¼ ìƒˆë¡œ ê¹”ì§€ ì•Šê³ , ì´ì „ ì±•í„°ì—ì„œì˜ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì¹´í”¼í•´ì„œ ê°€ì§€ê³  ì˜¨ë‹¤.

1. GraphQLì˜ íƒ€ì… ì¢…ë¥˜
  - ê°ì²´ íƒ€ì… : type
  - ìŠ¤ì¹¼ë¼ íƒ€ì… : Int, Float, String, Boolean, ID
  - ì—´ê±° íƒ€ì… : enum
  - ë¦¬ìŠ¤íŠ¸ íƒ€ì… : [íƒ€ì…]
  - ìœ ë‹ˆì˜¨ íƒ€ì… : íƒ€ì… | íƒ€ì…
  - ì¸í„°í˜ì´ìŠ¤ íƒ€ì… : interface



1. ê°ì²´ íƒ€ì…
  ê°ì²´ íƒ€ì…ì€ typeDefs ë³€ìˆ˜ ì•ˆì— ì´ë¯¸ ë‹´ê³  ìˆëŠ” ì•„ë˜ì™€ ê°™ì€ í˜•íƒœì´ë‹¤.
    type Equipment {
      id: String
      used_by: String
      count: Int
      new_or_used: String
    }



1. Scalar íƒ€ì… : GraphQL ë‚´ì¥ íƒ€ì…ì„ ì˜ë¯¸í•˜ë©°, ë‹¤ìŒê³¼ ê°™ë‹¤.
  Scalar íƒ€ì…ì˜ ì¢…ë¥˜
    ID : ê¸°ë³¸ì ìœ¼ë¡œëŠ” Stringì´ë‚˜, ê³ ìœ  ì‹ë³„ì ì—­í• ì„ì„ ë‚˜íƒ€ëƒ„
    String : UTF-8 ë¬¸ìì—´
    Int : ë¶€í˜¸ê°€ ìˆëŠ” ì •ìˆ˜
    Float : ë¶€í˜¸ê°€ ìˆëŠ” ë¶€ë™ì†Œìˆ˜ì  ê°’
    Boolean : ì°¸ / ê±°ì§“
    ! : Non Null

  ì˜ˆë¥¼ ë“¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ ì“°ê²Œ ë  ê²ƒì´ë‹¤.
    type EquipmentAdv {
      id: ID!
      used_by: String!
      count: Int!
      use_rate: Float
      is_new: Boolean!
    }



1. typedefs-resolvers/equipments.js ìˆ˜ì • : use_rate, is_new ë‘ê°œì˜ í•„ë“œë¥¼ ì¶”ê°€í•œ EquipmentAdv ì¿¼ë¦¬ë¥¼ ë§Œë“¤ì–´ë‘ê¸°. Scalar íƒ€ì…ì„ ì‚¬ìš©í•˜ê¸°
  const { gql } = require("apollo-server")
  const dbWorks = require("../dbWorks")

  const typeDefs = gql`
    type Equipment {
      id: String
      used_by: String
      count: Int
      new_or_used: String
    }
    type EquipmentAdv {
      id: ID!
      used_by: String!
      count: Int!
      use_rate: Float
      is_new: Boolean!
    }
  `

  const resolvers = {
    Query: {
      equipments: (parent, args) => dbWorks.getEquipments(args),
      equipmentAdvs: (parent, args) =>
        dbWorks.getEquipments(args).map((equipment) => {
          if (equipment.used_by === "developer") {
            // ê°œë°œìê°€ ì‚¬ìš©í•˜ëŠ” ì¥ë¹„ì¼ ê²½ìš°, ì‚¬ìš©ëŸ‰ì„ ëœë¤ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ë„£ì–´ì¤„ ê²ƒì´ë‹¤.
            equipment.use_rate = Math.random().toFixed(2)
          }
          // ìƒˆê²ƒì¸ì§€ ì¤‘ê³ ì¸ì§€ë¥¼ Boolean ê°’ìœ¼ë¡œ êµ¬ë¶„í•˜ëŠ” í•„ë“œë¥¼ ì¶”ê°€í•œë‹¤.
          equipment.is_new = equipment.new_or_used === "new"
          return equipment
        }),
    },
    Mutation: {
      deleteEquipment: (parent, args) => dbWorks.deleteItem("equipments", args),
    },
  }

  module.exports = {
    typeDefs: typeDefs,
    resolvers: resolvers,
  }



1. typedefs-resolvers/softwares.js ìƒì„±: Softwaresì˜ typeDefsì™€ resolvers ì„¤ì •. Scalar íƒ€ì…ì„ ì‚¬ìš©í•˜ê¸°
  const { gql } = require("apollo-server")
  const dbWorks = require("../dbWorks.js")

  const typeDefs = gql`
    type Software {
      id: ID!
      used_by: Role!
      developed_by: String!
      description: String
    }
  `

  const resolvers = {
    Query: {
      softwares: (parent, args) => dbWorks.getSoftwares(args),
      software: (parent, args) => dbWorks.getSoftwares(args)[0],
    },
  }

  module.exports = {
    typeDefs: typeDefs,
    resolvers: resolvers,
  }



1. typedefs-resolvers/_queries.js ìˆ˜ì • : "equipmentAdvs, softwares, software" ì¿¼ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.
  const { gql } = require("apollo-server")

  const typeDefs = gql`
    type Query {
      equipments: [Equipment]
      supplies: [Supply]
      equipmentAdvs: [EquipmentAdv]
      softwares: [Software]
      software: Software
    }
  `

  module.exports = typeDefs



1. index.js ìˆ˜ì • : ëª¨ë“ˆí™”ëœ softwaresì˜ typeDefs, resoleversë¥¼ ë£¨íŠ¸ëª¨ë“ˆì— ì ìš©ì‹œí‚¨ë‹¤.
  const { ApolloServer } = require('apollo-server')
  const _ = require('lodash')

  const queries = require('./typedefs-resolvers/_queries')
  const mutations = require('./typedefs-resolvers/_mutations')
  const equipments = require('./typedefs-resolvers/equipments')
  const supplies = require('./typedefs-resolvers/supplies')
  const softwares = require("./typedefs-resolvers/softwares")

  const typeDefs = [
    queries,
    mutations,
    equipments.typeDefs,
    supplies.typeDefs,
    softwares.typeDefs,
  ]

  const resolvers = [
    equipments.resolvers,
    supplies.resolvers,
    softwares.resolvers,
  ]

  const server =  new ApolloServer({ typeDefs, resolvers })

  server.listen().then(({url}) => {
    console.log(`ğŸš€  Server ready at ${url}`)
  })



1. í…ŒìŠ¤íŠ¸
  $ cd app1
  $ npm start
  http://localhost:4000/ ì ‘ì† : GraphQL Playgroundê°€ ì—´ë¦°ë‹¤.
  GraphQL Playground ì‚¬ìš© : ì¢Œì¸¡ì— ë‹¤ìŒ ì¿¼ë¦¬ë¥¼ ë„£ê³  Runì„ í´ë¦­
    query {
      equipmentAdvs {
        id
        used_by
        count
        use_rate
        is_new
      }
    }
  use_rate, is_new í•­ëª©ì´ ì¶”ê°€ëœ equipments ëª©ë¡ì´ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
  (ì°¸ê³ : use_rateì— nullì´ ìˆë”ë¼ë„ ì—ëŸ¬ê°€ ë‚˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” equipmentAdv íƒ€ì…ì—ì„œ use_rateì— null í—ˆìš©ì„ í–ˆê¸° ë•Œë¬¸ì´ë‹¤.)
  GraphQL Playground ì‚¬ìš© : ì¢Œì¸¡ì— ë‹¤ìŒ ì¿¼ë¦¬ë¥¼ ë„£ê³  Runì„ í´ë¦­
    query {
      softwares {
        id
        used_by
        developed_by
        description
      }
    }
  softwares ëª©ë¡ì´ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
