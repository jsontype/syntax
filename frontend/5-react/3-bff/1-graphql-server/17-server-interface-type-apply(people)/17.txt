[Interface íƒ€ì…ì„ People ì¿¼ë¦¬ì— ì ìš©]

1. ì‚¬ì „ì¤€ë¹„ : í”„ë¡œì íŠ¸ë¥¼ ìƒˆë¡œ ê¹”ì§€ ì•Šê³ , ì´ì „ ì±•í„°ì—ì„œì˜ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì¹´í”¼í•´ì„œ ê°€ì§€ê³  ì˜¨ë‹¤.



1. typedefs-resolvers/_enums.js ìˆ˜ì • : People ì¿¼ë¦¬ì— ì‚¬ìš©í•  Sex, BloodType ì´ë„˜(ì—´ê±°) íƒ€ì…ì„ ì •ì˜í•œë‹¤.
  const { gql } = require("apollo-server")

  const typeDefs = gql`
    enum Sex {
      male
      female
    }
    enum BloodType {
      A
      B
      AB
      O
    }
    enum Role {
      developer
      designer
      planner
    }
    enum NewOrUsed {
      new
      used
    }
  `
  module.exports = typeDefs



1. typedefs-resolvers/people.js ìƒì„± : Tool ì¸í„°í˜ì´ìŠ¤ë¥¼ People ì¿¼ë¦¬ì— ì ìš©
  const { gql } = require("apollo-server")
  const dbWorks = require("../dbWorks.js")

  const typeDefs = gql`
    type People {
      id: ID!
      first_name: String!
      last_name: String!
      sex: Sex!
      blood_type: BloodType!
      serve_years: Int!
      role: Role!
      team: ID!
      from: String!
      tools: [Tool]
      givens: [Given]
    }
  `

  const resolvers = {
    Query: {
      people: (parent, args) => dbWorks.getPeople(args),
      person: (parent, args) => dbWorks.getPeople(args)[0],
    },
  }

  module.exports = {
    typeDefs: typeDefs,
    resolvers: resolvers,
  }



1. typedefs-resolvers/_queries.js ìˆ˜ì • : people ì¿¼ë¦¬ì˜ íƒ€ì…ì„ ì¶”ê°€í•œë‹¤.
  const { gql } = require("apollo-server")

  const typeDefs = gql`
    type Query {
      equipments: [Equipment]
      supplies: [Supply]
      equipmentAdvs: [EquipmentAdv]
      softwares: [Software]
      software: Software
      givens: [Given]
      people: [People]
      person: People
    }
  `

  module.exports = typeDefs



1. typedefs-resolvers/supplies.js ìˆ˜ì • : supplies ì¿¼ë¦¬ì˜ íƒ€ì… ì¤‘, id íƒ€ì…ì„ Stringì—ì„œ ID!ë¡œ ìˆ˜ì • í•œë‹¤. givensì—ì„œ ì‚¬ìš©ë  ë•Œ id íƒ€ì…ì´ íƒ€ ì¿¼ë¦¬ì™€ ì¼ì¹˜ë˜ë„ë¡ í•˜ê¸° ìœ„í•¨
  const { gql } = require("apollo-server")
  const dbWorks = require("../dbWorks")

  const typeDefs = gql`
    type Supply {
      id: ID!
      team: Int
    }
  `

  const resolvers = {
    Query: {
      supplies: (parent, args) => dbWorks.getSupplies(args),
    },
    Mutation: {
      deleteSupply: (parent, args) => dbWorks.deleteItem("supplies", args),
    },
  }

  module.exports = {
    typeDefs: typeDefs,
    resolvers: resolvers,
  }



1. index.js ìˆ˜ì • : ëª¨ë“ˆí™”ëœ peopleì˜ typeDefs, resolvers ì¶”ê°€
  const { ApolloServer } = require("apollo-server")
  const _ = require("lodash")

  const queries = require("./typedefs-resolvers/_queries")
  const mutations = require("./typedefs-resolvers/_mutations")
  const enums = require("./typedefs-resolvers/_enums")
  const equipments = require("./typedefs-resolvers/equipments")
  const supplies = require("./typedefs-resolvers/supplies")
  const softwares = require("./typedefs-resolvers/softwares")
  const givens = require("./typedefs-resolvers/givens")
  const tools = require("./typedefs-resolvers/tools")
  const people = require("./typedefs-resolvers/people")

  const typeDefs = [
    queries,
    mutations,
    enums,
    equipments.typeDefs,
    supplies.typeDefs,
    softwares.typeDefs,
    givens.typeDefs,
    tools.typeDefs,
    people.typeDefs,
  ]

  const resolvers = [
    equipments.resolvers,
    supplies.resolvers,
    softwares.resolvers,
    givens.resolvers,
    tools.resolvers,
    people.resolvers,
  ]

  const server = new ApolloServer({ typeDefs, resolvers })

  server.listen().then(({ url }) => {
    console.log(`ğŸš€  Server ready at ${url}`)
  })



1. í…ŒìŠ¤íŠ¸
  $ cd app1
  $ npm start
  http://localhost:4000/ ì ‘ì† : GraphQL Playgroundê°€ ì—´ë¦°ë‹¤.
  GraphQL Playground ì‚¬ìš© : ì¢Œì¸¡ì— ë‹¤ìŒ ì¿¼ë¦¬ë¥¼ ë„£ê³  Runì„ í´ë¦­
    query {
      people {
        id
        first_name
        last_name
        givens {
            __typename
          ... on Equipment {
            id
            used_by
            count
            new_or_used
          }
          ... on Supply {
            id
            team
          }
        }
        tools {
          __typename
          ... on Equipment {
            id
            used_by
            count
            new_or_used
          }
          ... on Software {
            id
            used_by
            description
            developed_by
          }
        }
      }
    }
  ê²°ê³¼ë¥¼ ë³´ê³  GraphQL ëŒ€ë¡œ people ë°ì´í„°ë¥¼ ì·¨ë“í•  ìˆ˜ ìˆì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.
