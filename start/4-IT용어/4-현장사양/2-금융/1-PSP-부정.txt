[PSP 부정 대응 업무에 대한 사양]

1. 사전 필수 지식
  가맹점 : EC 사이트, 점포 등을 말함
  PSP : 결제대행업체(Payment Service Provider)를 말함
  결제 수단 : "권종"이라고도 하는데, 20여종 이상으로 굉장히 많다. 예를 들면,
    편의점결제
    카드회사 (신용카드)
    전자지갑서비스 (paypay)
    쇼핑론 (JACCS)
    은행넷 (송금, ATM)
    현금결제 (대금교환)
    휴대폰코드결제
    ...등등
  가맹점과 PSP의 관계 : 가맹점 (수수료 지불)-> PSP (계약 대행)-> 20여종의 결제수단

1. 부정 업무란?
  카드를 악용시 챠지백을 처리하게 되고, 이로 인해 카드 소유자가 지불하지 않게 되지만, 이 금액을 "누가 지불하냐"의 책임을 관리하는 업무
  누가 지불하냐? 일반적으로 아마존과 같은 EC 가맹점에서 책임지는 경우가 많다.
  상황: 부정이용자 <-(부정이용자에게 발송 / 이용)-> EC 가맹점
  대응: 카드명의자 (사용안함)-> 카드회사 (이용내역조회) -> PSP (입금취소)-> EC 가맹점 (책임을 짐) 

1. 부정 스테이터스 루트 1 : 배송 전 악용우려시
  (부정 웹) 속성조회 의뢰 : 악용 의심 상태에서 가맹점이 상품을 아직 안 보냈을 때, 상품 발송을 멈춰달라는 요청을 가맹점 쪽에 하는 의뢰이다.
  (가맹점 웹) 악용확정 회답 / 챠지백 거부 / 챠지백 응락 : 악용 확정시, 배송 중단과 챠지백을 동시에 가맹점쪽에 요청한다.

1. 부정 스테이터스 루트 2 : 배송 후 악용우려시
  (부정 웹) 이용내역조회 의뢰 : 악용 의심 상태에서 가맹점이 이미 발송을 마친 경우, 어떤 상품을 발송했는지, 금액, 거래일시 등등을 입력해서 PSP회사에 조회를 요청한다.
  (가맹점 웹) 이용내역조회 회답 : 결제 금액 등등을 적어준다. 여기서 국내 명의자인데도 배송처가 해외인 경우도 있다.
  (부정 웹) 악용확정 의뢰 : 위 회답 정보를 기준으로 악용확정을 의뢰한다.
  (가맹점 웹) 악용확정 회답 / 챠지백 거부 / 챠지백 응락 : 챠지백을 판단하여 회답한다. 여기에는 사유 등의 코멘트를 포함한다.
    챠지백의 판단 기준은 다음과 같다.
    챠지백 응락 : 
      악용 확정시, EC 사이트에 챠지백을 요구한다. 보통 전액 챠지백을 하지만,
      레어한 케이스 중 일부만 챠지백도 있는데, 이는 여러 가게의 물품을 동시 구입해서, 금액이 총액으로 나올 경우에 해당한다.
    챠지백 거부 :
      이용내역을 조회했는데 문제가 없었다. 그럼 이걸로 처리 후 끝난다.
    챠지백 캔슬 :
      챠지백을 이미 가맹점으로부터 받은 경우, 악용이 아니었던 경우 등등에 이 처리를 한다.
      화면에서는 한번 응락을 했지만 한번 더 응락 스테이터스를 선택하면 라디오버튼이 캔슬로 이동되고, 그대로 등록시 캔슬을 할 수 있다.

1. 보안, 서큐리티 관련 Tech 용어들
  3DS : Three Dimension Secure의 약자로, Visa, Mastercard를 포함 5대 카드사가 채용하고 있다.
    카드 뒷면에 3자리 숫자 코드 + 카드 비밀번호 + 3번째 추가정보(휴대폰 인증코드 보내기, 메일로 인증코드 보내기, 재로그인 요구 등)를 요구하는 경우다.
    이를 도입하면 수수료가 약간 들어서, 이를 채용하지 않는 가맹점도 있다.
  Transtatus : 3DS 인증을 사용하는지 아닌지에 대한 여부.
    Y라면, 가맹점의 책임은 면제되고 카드회사의 책임이 된다.
    N이라면, 인증이 없는데 팔았으니, 카드회사 책임이 아니고, 가맹점의 책임이 된다.
  ECI : 3DS 인증의 상태이다.
    Visa의 경우, 3DS 인증이 OK의 경우 Y, 인증 실패한 경우 N, A, U 등으로 표시한다.
    Mastercard의 경우, 3DS 인증이 OK의 경우 05 또는 06, 인증 실패한 경우 00 또는 01 등으로 표시한다.

1. 대면결제
  C**** 서비스 : 결제종합네트워크. 지불시 카드결제를 중개하는 역할을 한다.
  대면결제 :
    Arch 단말기, 입금기(기프트권이나 상품권 읽는 기계 형태), DBO 업무 단말, POS기(편의점, 소매점에 있는 것)
    일반적으로 웹에서는 대면 결제를 처리하지 않지만, 단말기로 처리된 거래들의 결과 데이터를 웹으로 받아서, DB에 저장해두기는 한다.
    일반적으로 테이블에 "external"이라는 수식어를 붙인다.
    - 대면결제 관련 용어들
      PID : 단말기 식별번호
      전표번호 : 영수증 번호
      승인번호 : 결제사업자(카드회사)의 승인번호
    - 대면결제에서 발생하는 부정 사용의 케이스 : 1년에 한번 있을까 말까한 케이스라고 함. 이 경우 책임자를 모르기 때문에 어디에도 메일은 보내지 않는다.
      카드를 훔쳐서 비밀번호까지 맞춘 경우
      편의점 등에서 카드번호를 눈으로 훔치는 경우
      가족이나 지인이 몰래 카드를 훔쳐 쓴 경우
      해외에서 페이크 카드를 만들어서 결제에 성공한 경우
  비대면결제 :
    메일링크결제 (link payment) : 메일로 결제 가능한 url을 보내서, 간단하게 결제할 수 있게 하는 방식
    그 외 모든 웹 상에서의 결제 방식
    
1. 계층모델
  포괄대리모델 : 가맹점 <-(가맹점에게 수수료 뺏음 / 계약)-> PSP <-(카드회사로부터 수수료 뺏김 / 대리계약)-> 카드회사
  이중포괄대리모델 : 테넌트 <-> 가맹점(대형백화점) <-> PSP <-> 카드회사
  포괄가맹점모델 : 가맹점 <-> PSP <-> 카드회사 <-> 카드회사의 pay 관련회사(paypay 같은 것) / 이중포괄대리모델이랑 비슷하다.
  포괄모델 : 일반 소매 가맹점의 경우. 보다 간단하고 수수료는 좀 더 비싼 형태.
  프로세싱모델 : 공증, 국고금, 정부가 운영하는 기관 등으로 수수료를 더 저렴하게 한 형태
  공금모델 : 세금, 노후연금, 납부 계약, 속도위반시의 금액 납부 등등 정부 업무와 관련된 것들에 해당하는 모델

1. PSP 계층
  PSP 계층
    계층1: 안건: 하기 주식회사를 자회사로 소유한 대기업
    계층2: 관리회사: 긴자식스를 관리하는 주식회사
    계층3: 시설: 긴자식스 등 대형백화점
    계층4: 테넌트: IWC, 브라이틀링 등 소매점
  가맹점 정산단위 계층 : 이 계층에서 점포마다의 정산을 모두 관리한다.
    일반적으로 정산단위는 계층 2인 경우, 계층 3인 경우 중 하나이다.
    부정관리자 등과 관계있는 어카운트는 이 계층의 어카운트를 사용하게 되는 것이다.
